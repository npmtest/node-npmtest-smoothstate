{"/home/travis/build/npmtest/node-npmtest-smoothstate/test.js":"/* istanbul instrument in package npmtest_smoothstate */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        switch (local.modeJs) {\n        // re-init local from window.local\n        case 'browser':\n            local = local.global.utility2.objectSetDefault(\n                local.global.utility2_rollup || local.global.local,\n                local.global.utility2\n            );\n            break;\n        // re-init local from example.js\n        case 'node':\n            local = (local.global.utility2_rollup || require('utility2'))\n                .requireExampleJsFromReadme();\n            break;\n        }\n        // export local\n        local.global.local = local;\n    }());\n\n\n\n    // run shared js-env code - function\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - function\n    case 'browser':\n        break;\n\n\n\n    // run node js-env code - function\n    case 'node':\n        break;\n    }\n\n\n\n    // run shared js-env code - post-init\n    (function () {\n        return;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // run browser js-env code - post-init\n    case 'browser':\n        local.testCase_browser_nullCase = local.testCase_browser_nullCase || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test browsers's null-case handling-behavior-behavior\n         */\n            onError(null, options);\n        };\n\n        // run tests\n        local.nop(local.modeTest &&\n            document.querySelector('#testRunButton1') &&\n            document.querySelector('#testRunButton1').click());\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        local.testCase_buildApidoc_default = local.testCase_buildApidoc_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApidoc's default handling-behavior-behavior\n         */\n            options = { modulePathList: module.paths };\n            local.buildApidoc(options, onError);\n        };\n\n        local.testCase_buildApp_default = local.testCase_buildApp_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildApp's default handling-behavior-behavior\n         */\n            local.testCase_buildReadme_default(options, local.onErrorThrow);\n            local.testCase_buildLib_default(options, local.onErrorThrow);\n            local.testCase_buildTest_default(options, local.onErrorThrow);\n            local.testCase_buildCustomOrg_default(options, local.onErrorThrow);\n            options = [];\n            local.buildApp(options, onError);\n        };\n\n        local.testCase_buildCustomOrg_default = local.testCase_buildCustomOrg_default ||\n            function (options, onError) {\n            /*\n             * this function will test buildCustomOrg's default handling-behavior\n             */\n                options = {};\n                local.buildCustomOrg(options, onError);\n            };\n\n        local.testCase_buildLib_default = local.testCase_buildLib_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildLib's default handling-behavior\n         */\n            options = {};\n            local.buildLib(options, onError);\n        };\n\n        local.testCase_buildReadme_default = local.testCase_buildReadme_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildReadme's default handling-behavior-behavior\n         */\n            options = {};\n            local.buildReadme(options, onError);\n        };\n\n        local.testCase_buildTest_default = local.testCase_buildTest_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test buildTest's default handling-behavior\n         */\n            options = {};\n            local.buildTest(options, onError);\n        };\n\n        local.testCase_webpage_default = local.testCase_webpage_default || function (\n            options,\n            onError\n        ) {\n        /*\n         * this function will test webpage's default handling-behavior\n         */\n            options = { modeCoverageMerge: true, url: local.serverLocalHost + '?modeTest=1' };\n            local.browserTest(options, onError);\n        };\n\n        // run test-server\n        local.testRunServer(local);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-smoothstate/lib.npmtest_smoothstate.js":"/* istanbul instrument in package npmtest_smoothstate */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || local;\n        // init lib\n        local.local = local.npmtest_smoothstate = local;\n        // init exports\n        if (local.modeJs === 'browser') {\n            local.global.utility2_npmtest_smoothstate = local;\n        } else {\n            module.exports = local;\n            module.exports.__dirname = __dirname;\n            module.exports.module = module;\n        }\n    }());\n}());\n","/home/travis/build/npmtest/node-npmtest-smoothstate/example.js":"/*\nexample.js\n\nquickstart example\n\ninstruction\n    1. save this script as example.js\n    2. run the shell command:\n        $ npm install npmtest-smoothstate && PORT=8081 node example.js\n    3. play with the browser-demo on http://127.0.0.1:8081\n*/\n\n\n\n/* istanbul instrument in package npmtest_smoothstate */\n/*jslint\n    bitwise: true,\n    browser: true,\n    maxerr: 8,\n    maxlen: 96,\n    node: true,\n    nomen: true,\n    regexp: true,\n    stupid: true\n*/\n(function () {\n    'use strict';\n    var local;\n\n\n\n    // run shared js-env code - pre-init\n    (function () {\n        // init local\n        local = {};\n        // init modeJs\n        local.modeJs = (function () {\n            try {\n                return typeof navigator.userAgent === 'string' &&\n                    typeof document.querySelector('body') === 'object' &&\n                    typeof XMLHttpRequest.prototype.open === 'function' &&\n                    'browser';\n            } catch (errorCaughtBrowser) {\n                return module.exports &&\n                    typeof process.versions.node === 'string' &&\n                    typeof require('http').createServer === 'function' &&\n                    'node';\n            }\n        }());\n        // init global\n        local.global = local.modeJs === 'browser'\n            ? window\n            : global;\n        // init utility2_rollup\n        local = local.global.utility2_rollup || (local.modeJs === 'browser'\n            ? local.global.utility2_npmtest_smoothstate\n            : global.utility2_moduleExports);\n        // export local\n        local.global.local = local;\n    }());\n    switch (local.modeJs) {\n\n\n\n    // post-init\n    // run browser js-env code - post-init\n    /* istanbul ignore next */\n    case 'browser':\n        local.testRunBrowser = function (event) {\n            if (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('onreset'))) {\n                // reset output\n                Array.from(\n                    document.querySelectorAll('body > .resettable')\n                ).forEach(function (element) {\n                    switch (element.tagName) {\n                    case 'INPUT':\n                    case 'TEXTAREA':\n                        element.value = '';\n                        break;\n                    default:\n                        element.textContent = '';\n                    }\n                });\n            }\n            switch (event && event.currentTarget && event.currentTarget.id) {\n            case 'testRunButton1':\n                // show tests\n                if (document.querySelector('#testReportDiv1').style.display === 'none') {\n                    document.querySelector('#testReportDiv1').style.display = 'block';\n                    document.querySelector('#testRunButton1').textContent =\n                        'hide internal test';\n                    local.modeTest = true;\n                    local.testRunDefault(local);\n                // hide tests\n                } else {\n                    document.querySelector('#testReportDiv1').style.display = 'none';\n                    document.querySelector('#testRunButton1').textContent = 'run internal test';\n                }\n                break;\n            // custom-case\n            default:\n                break;\n            }\n            if (document.querySelector('#inputTextareaEval1') && (!event || (event &&\n                    event.currentTarget &&\n                    event.currentTarget.className &&\n                    event.currentTarget.className.includes &&\n                    event.currentTarget.className.includes('oneval')))) {\n                // try to eval input-code\n                try {\n                    /*jslint evil: true*/\n                    eval(document.querySelector('#inputTextareaEval1').value);\n                } catch (errorCaught) {\n                    console.error(errorCaught);\n                }\n            }\n        };\n        // log stderr and stdout to #outputTextareaStdout1\n        ['error', 'log'].forEach(function (key) {\n            console[key + '_original'] = console[key];\n            console[key] = function () {\n                var element;\n                console[key + '_original'].apply(console, arguments);\n                element = document.querySelector('#outputTextareaStdout1');\n                if (!element) {\n                    return;\n                }\n                // append text to #outputTextareaStdout1\n                element.value += Array.from(arguments).map(function (arg) {\n                    return typeof arg === 'string'\n                        ? arg\n                        : JSON.stringify(arg, null, 4);\n                }).join(' ') + '\\n';\n                // scroll textarea to bottom\n                element.scrollTop = element.scrollHeight;\n            };\n        });\n        // init event-handling\n        ['change', 'click', 'keyup'].forEach(function (event) {\n            Array.from(document.querySelectorAll('.on' + event)).forEach(function (element) {\n                element.addEventListener(event, local.testRunBrowser);\n            });\n        });\n        // run tests\n        local.testRunBrowser();\n        break;\n\n\n\n    // run node js-env code - post-init\n    /* istanbul ignore next */\n    case 'node':\n        // export local\n        module.exports = local;\n        // require modules\n        local.fs = require('fs');\n        local.http = require('http');\n        local.url = require('url');\n        // init assets\n        local.assetsDict = local.assetsDict || {};\n        /* jslint-ignore-begin */\n        local.assetsDict['/assets.index.template.html'] = '\\\n<!doctype html>\\n\\\n<html lang=\"en\">\\n\\\n<head>\\n\\\n<meta charset=\"UTF-8\">\\n\\\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\\n\\\n<title>{{env.npm_package_name}} (v{{env.npm_package_version}})</title>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n    box-sizing: false,\\n\\\n    universal-selector: false\\n\\\n*/\\n\\\n* {\\n\\\n    box-sizing: border-box;\\n\\\n}\\n\\\nbody {\\n\\\n    background: #dde;\\n\\\n    font-family: Arial, Helvetica, sans-serif;\\n\\\n    margin: 2rem;\\n\\\n}\\n\\\nbody > * {\\n\\\n    margin-bottom: 1rem;\\n\\\n}\\n\\\n.utility2FooterDiv {\\n\\\n    margin-top: 20px;\\n\\\n    text-align: center;\\n\\\n}\\n\\\n</style>\\n\\\n<style>\\n\\\n/*csslint\\n\\\n*/\\n\\\ntextarea {\\n\\\n    font-family: monospace;\\n\\\n    height: 10rem;\\n\\\n    width: 100%;\\n\\\n}\\n\\\ntextarea[readonly] {\\n\\\n    background: #ddd;\\n\\\n}\\n\\\n</style>\\n\\\n</head>\\n\\\n<body>\\n\\\n<!-- utility2-comment\\n\\\n<div id=\"ajaxProgressDiv1\" style=\"background: #d00; height: 2px; left: 0; margin: 0; padding: 0; position: fixed; top: 0; transition: background 0.5s, width 1.5s; width: 25%;\"></div>\\n\\\nutility2-comment -->\\n\\\n<h1>\\n\\\n<!-- utility2-comment\\n\\\n    <a\\n\\\n        {{#if env.npm_package_homepage}}\\n\\\n        href=\"{{env.npm_package_homepage}}\"\\n\\\n        {{/if env.npm_package_homepage}}\\n\\\n        target=\"_blank\"\\n\\\n    >\\n\\\nutility2-comment -->\\n\\\n        {{env.npm_package_name}} (v{{env.npm_package_version}})\\n\\\n<!-- utility2-comment\\n\\\n    </a>\\n\\\nutility2-comment -->\\n\\\n</h1>\\n\\\n<h3>{{env.npm_package_description}}</h3>\\n\\\n<!-- utility2-comment\\n\\\n<h4><a download href=\"assets.app.js\">download standalone app</a></h4>\\n\\\n<button class=\"onclick onreset\" id=\"testRunButton1\">run internal test</button><br>\\n\\\n<div id=\"testReportDiv1\" style=\"display: none;\"></div>\\n\\\nutility2-comment -->\\n\\\n\\n\\\n\\n\\\n\\n\\\n<label>stderr and stdout</label>\\n\\\n<textarea class=\"resettable\" id=\"outputTextareaStdout1\" readonly></textarea>\\n\\\n<!-- utility2-comment\\n\\\n{{#if isRollup}}\\n\\\n<script src=\"assets.app.js\"></script>\\n\\\n{{#unless isRollup}}\\n\\\nutility2-comment -->\\n\\\n<script src=\"assets.utility2.rollup.js\"></script>\\n\\\n<script src=\"jsonp.utility2._stateInit?callback=window.utility2._stateInit\"></script>\\n\\\n<script src=\"assets.npmtest_smoothstate.rollup.js\"></script>\\n\\\n<script src=\"assets.example.js\"></script>\\n\\\n<script src=\"assets.test.js\"></script>\\n\\\n<!-- utility2-comment\\n\\\n{{/if isRollup}}\\n\\\nutility2-comment -->\\n\\\n<div class=\"utility2FooterDiv\">\\n\\\n    [ this app was created with\\n\\\n    <a href=\"https://github.com/kaizhu256/node-utility2\" target=\"_blank\">utility2</a>\\n\\\n    ]\\n\\\n</div>\\n\\\n</body>\\n\\\n</html>\\n\\\n';\n        /* jslint-ignore-end */\n        if (local.templateRender) {\n            local.assetsDict['/'] = local.templateRender(\n                local.assetsDict['/assets.index.template.html'],\n                {\n                    env: local.objectSetDefault(local.env, {\n                        npm_package_description: 'the greatest app in the world!',\n                        npm_package_name: 'my-app',\n                        npm_package_nameAlias: 'my_app',\n                        npm_package_version: '0.0.1'\n                    })\n                }\n            );\n        } else {\n            local.assetsDict['/'] = local.assetsDict['/assets.index.template.html']\n                .replace((/\\{\\{env\\.(\\w+?)\\}\\}/g), function (match0, match1) {\n                    // jslint-hack\n                    String(match0);\n                    switch (match1) {\n                    case 'npm_package_description':\n                        return 'the greatest app in the world!';\n                    case 'npm_package_name':\n                        return 'my-app';\n                    case 'npm_package_nameAlias':\n                        return 'my_app';\n                    case 'npm_package_version':\n                        return '0.0.1';\n                    }\n                });\n        }\n        // run the cli\n        if (local.global.utility2_rollup || module !== require.main) {\n            break;\n        }\n        local.assetsDict['/assets.example.js'] =\n            local.assetsDict['/assets.example.js'] ||\n            local.fs.readFileSync(__filename, 'utf8');\n        local.assetsDict['/assets.npmtest_smoothstate.rollup.js'] =\n            local.assetsDict['/assets.npmtest_smoothstate.rollup.js'] ||\n            local.fs.readFileSync(\n                // buildCustomOrg-hack\n                local.npmtest_smoothstate.__dirname +\n                    '/lib.npmtest_smoothstate.js',\n                'utf8'\n            ).replace((/^#!/), '//');\n        local.assetsDict['/favicon.ico'] = local.assetsDict['/favicon.ico'] || '';\n        // if $npm_config_timeout_exit exists,\n        // then exit this process after $npm_config_timeout_exit ms\n        if (Number(process.env.npm_config_timeout_exit)) {\n            setTimeout(process.exit, Number(process.env.npm_config_timeout_exit));\n        }\n        // start server\n        if (local.global.utility2_serverHttp1) {\n            break;\n        }\n        process.env.PORT = process.env.PORT || '8081';\n        console.error('server starting on port ' + process.env.PORT);\n        local.http.createServer(function (request, response) {\n            request.urlParsed = local.url.parse(request.url);\n            if (local.assetsDict[request.urlParsed.pathname] !== undefined) {\n                response.end(local.assetsDict[request.urlParsed.pathname]);\n                return;\n            }\n            response.statusCode = 404;\n            response.end();\n        }).listen(process.env.PORT);\n        break;\n    }\n}());\n","/home/travis/build/npmtest/node-npmtest-smoothstate/node_modules/smoothstate/src/jquery.smoothState.js":"/**\n * smoothState.js is a jQuery plugin to stop page load jank.\n *\n * This jQuery plugin progressively enhances page loads to\n * behave more like a single-page application.\n *\n * @author  Miguel Ángel Pérez   reachme@miguel-perez.com\n * @see     https://github.com/miguel-perez/jquery.smoothState.js\n *\n */\n\n;(function ( $, window, document, undefined ) {\n  'use strict';\n\n  /** Abort if browser does not support pushState */\n  if(!window.history.pushState) {\n    // setup a dummy fn, but don't intercept on link clicks\n    $.fn.smoothState = function() { return this; };\n    $.fn.smoothState.options = {};\n    return;\n  }\n\n  /** Abort if smoothState is already present **/\n  if($.fn.smoothState) { return; }\n\n  var\n    /** Used later to scroll page to the top */\n    $body = $('html, body'),\n\n    /** Used in debug mode to console out useful warnings */\n    consl = window.console,\n\n    /** Plugin default options, will be exposed as $fn.smoothState.options */\n    defaults = {\n\n      /** If set to true, smoothState will log useful debug information instead of aborting */\n      debug: false,\n\n      /** jQuery selector to specify which anchors smoothState should bind to */\n      anchors: 'a',\n\n      /** jQuery selector to specify which forms smoothState should bind to */\n      forms: 'form',\n\n      /** A selector that defines what should be ignored by smoothState */\n      blacklist: '.no-smoothState',\n\n      /** If set to true, smoothState will prefetch a link's contents on hover */\n      prefetch: false,\n\n      /** The number of pages smoothState will try to store in memory */\n      cacheLength: 0,\n\n      /** Class that will be applied to the body while the page is loading */\n      loadingClass: 'is-loading',\n\n      /**\n       * A function that can be used to alter the ajax request settings before it is called\n       * @param  {Object} request jQuery.ajax settings object that will be used to make the request\n       * @return {Object}         Altered request object\n       */\n      alterRequest: function (request) {\n        return request;\n      },\n\n      /** Run before a page load has been activated */\n      onBefore: function ($currentTarget, $container) {},\n\n      /** Run when a page load has been activated */\n      onStart: {\n        duration: 0,\n        render: function ($container) {}\n      },\n\n      /** Run if the page request is still pending and onStart has finished animating */\n      onProgress: {\n        duration: 0,\n        render: function ($container) {}\n      },\n\n      /** Run when requested content is ready to be injected into the page  */\n      onReady: {\n        duration: 0,\n        render: function ($container, $newContent) {\n          $container.html($newContent);\n        }\n      },\n\n      /** Run when content has been injected and all animations are complete  */\n      onAfter: function($container, $newContent) {}\n    },\n\n    /** Utility functions that are decoupled from smoothState */\n    utility = {\n\n      /**\n       * Checks to see if the url is external\n       * @param   {string}    url - url being evaluated\n       * @see     http://stackoverflow.com/questions/6238351/fastest-way-to-detect-external-urls\n       *\n       */\n      isExternal: function (url) {\n        var match = url.match(/^([^:\\/?#]+:)?(?:\\/\\/([^\\/?#]*))?([^?#]+)?(\\?[^#]*)?(#.*)?/);\n        if (typeof match[1] === 'string' && match[1].length > 0 && match[1].toLowerCase() !== window.location.protocol) {\n          return true;\n        }\n        if (typeof match[2] === 'string' &&\n          match[2].length > 0 &&\n          match[2].replace(new RegExp(':(' + {'http:': 80, 'https:': 443}[window.location.protocol] +\n            ')?$'), '') !== window.location.host) {\n          return true;\n        }\n        return false;\n      },\n\n      /**\n       * Strips the hash from a url and returns the new href\n       * @param   {string}    href - url being evaluated\n       *\n       */\n      stripHash: function(href) {\n        return href.replace(/#.*/, '');\n      },\n\n      /**\n       * Checks to see if the url is an internal hash\n       * @param   {string}    href - url being evaluated\n       * @param   {string}    prev - previous url (optional)\n       *\n       */\n      isHash: function (href, prev) {\n        prev = prev || window.location.href;\n\n        var hasHash = (href.indexOf('#') > -1) ? true : false,\n            samePath = (utility.stripHash(href) === utility.stripHash(prev)) ? true : false;\n\n        return (hasHash && samePath);\n      },\n\n      /**\n       * Translates a url string into a $.ajax settings obj\n       * @param  {Object|String} request url or settings obj\n       * @return {Object}        settings object\n       */\n      translate: function(request) {\n          var defaults = {\n            dataType: 'html',\n            type: 'GET'\n          };\n          if(typeof request === 'string') {\n            request = $.extend({}, defaults, { url: request });\n          } else {\n            request = $.extend({}, defaults, request);\n          }\n          return request;\n      },\n\n      /**\n       * Checks to see if we should be loading this URL\n       * @param   {string}    url - url being evaluated\n       * @param   {string}    blacklist - jquery selector\n       *\n       */\n      shouldLoadAnchor: function ($anchor, blacklist) {\n        var href = $anchor.prop('href');\n        // URL will only be loaded if it's not an external link, hash, or blacklisted\n        return (!utility.isExternal(href) && !utility.isHash(href) && !$anchor.is(blacklist) && !$anchor.prop('target'));\n      },\n\n      /**\n       * Resets an object if it has too many properties\n       *\n       * This is used to clear the 'cache' object that stores\n       * all of the html. This would prevent the client from\n       * running out of memory and allow the user to hit the\n       * server for a fresh copy of the content.\n       *\n       * @param   {object}    obj\n       * @param   {number}    cap\n       *\n       */\n      clearIfOverCapacity: function (cache, cap) {\n        // Polyfill Object.keys if it doesn't exist\n        if (!Object.keys) {\n          Object.keys = function (obj) {\n            var keys = [],\n              k;\n            for (k in obj) {\n              if (Object.prototype.hasOwnProperty.call(obj, k)) {\n                keys.push(k);\n              }\n            }\n            return keys;\n          };\n        }\n\n        if (Object.keys(cache).length > cap) {\n          cache = {};\n        }\n\n        return cache;\n      },\n\n      /**\n       * Stores a document fragment into an object\n       * @param   {object}    object - object where it will be sotred\n       * @param   {string}    url - name of the entry\n       * @param   {string|document}    doc - entire html\n       * @param   {string}    id - the id of the fragment\n       *\n       */\n      storePageIn: function (object, url, doc, id) {\n        var $newDoc = $(doc);\n\n        object[url] = { // Content is indexed by the url\n          status: 'loaded',\n          // Stores the title of the page, .first() prevents getting svg titles\n          title: $newDoc.filter('title').first().text(),\n          html: $newDoc.filter('#' + id), // Stores the contents of the page\n        };\n        return object;\n      },\n\n      /**\n       * Triggers an 'allanimationend' event when all animations are complete\n       * @param   {object}    $element - jQuery object that should trigger event\n       * @param   {string}    resetOn - which other events to trigger allanimationend on\n       *\n       */\n      triggerAllAnimationEndEvent: function ($element, resetOn) {\n\n        resetOn = ' ' + resetOn || '';\n\n        var animationCount = 0,\n          animationstart = 'animationstart webkitAnimationStart oanimationstart MSAnimationStart',\n          animationend = 'animationend webkitAnimationEnd oanimationend MSAnimationEnd',\n          eventname = 'allanimationend',\n          onAnimationStart = function (e) {\n            if ($(e.delegateTarget).is($element)) {\n              e.stopPropagation();\n              animationCount++;\n            }\n          },\n          onAnimationEnd = function (e) {\n            if ($(e.delegateTarget).is($element)) {\n              e.stopPropagation();\n              animationCount--;\n              if(animationCount === 0) {\n                $element.trigger(eventname);\n              }\n            }\n          };\n\n        $element.on(animationstart, onAnimationStart);\n        $element.on(animationend, onAnimationEnd);\n\n        $element.on('allanimationend' + resetOn, function(){\n          animationCount = 0;\n          utility.redraw($element);\n        });\n      },\n\n      /** Forces browser to redraw elements */\n      redraw: function ($element) {\n        $element.height();\n      }\n    },\n\n    /** Handles the popstate event, like when the user hits 'back' */\n    onPopState = function ( e ) {\n      if(e.state !== null) {\n        var url = window.location.href,\n          $page = $('#' + e.state.id),\n          page = $page.data('smoothState');\n\n        if(page.href !== url && !utility.isHash(url, page.href)) {\n          page.load(url, false);\n        }\n      }\n    },\n\n    /** Constructor function */\n    Smoothstate = function ( element, options ) {\n      var\n        /** Container element smoothState is run on */\n        $container = $(element),\n\n        /** ID of the main container */\n        elementId = $container.prop('id'),\n\n        /** If a hash was clicked, we'll store it here so we\n         *  can scroll to it once the new page has been fully\n         *  loaded.\n         */\n        targetHash = null,\n\n        /** Used to prevent fetching while we transition so\n         *  that we don't mistakenly override a cache entry\n         *  we need.\n         */\n        isTransitioning = false,\n\n        /** Variable that stores pages after they are requested */\n        cache = {},\n\n        /** Url of the content that is currently displayed */\n        currentHref = window.location.href,\n\n        /**\n         * Clears a given page from the cache, if no url is provided\n         * it will clear the entire cache.\n         * @param  {String} url entry that is to be deleted.\n         */\n        clear = function(url) {\n          url = url || false;\n          if(url && cache.hasOwnProperty(url)) {\n            delete cache[url];\n          } else {\n            cache = {};\n          }\n          $container.data('smoothState').cache = cache;\n        },\n\n        /**\n         * Fetches the contents of a url and stores it in the 'cache' variable\n         * @param  {String|Object}   request  url or request settings object\n         * @param  {Function} callback function that will run as soon as it finishes\n         */\n        fetch = function (request, callback) {\n\n          // Sets a default in case a callback is not defined\n          callback = callback || $.noop;\n\n          // Allows us to accept a url string or object as the ajax settings\n          var settings = utility.translate(request);\n\n          // Don't prefetch if we have the content already or if it's a form\n          if(cache.hasOwnProperty(settings.url) && typeof settings.data === 'undefined') {\n            return;\n          }\n\n          // Check the length of the cache and clear it if needed\n          cache = utility.clearIfOverCapacity(cache, options.cacheLength);\n\n          // Let other parts of the code know we're working on getting the content\n          cache[settings.url] = { status: 'fetching' };\n\n          // Make the ajax request\n          var ajaxRequest = $.ajax(settings);\n\n          // Store contents in cache variable if successful\n          ajaxRequest.success(function (html) {\n            utility.storePageIn(cache, settings.url, html, elementId);\n            $container.data('smoothState').cache = cache;\n          });\n\n          // Mark as error to be acted on later\n          ajaxRequest.error(function () {\n            cache[settings.url].status = 'error';\n          });\n\n          // Call fetch callback\n          if(callback) {\n            ajaxRequest.complete(callback);\n          }\n        },\n\n        repositionWindow = function(){\n          // Scroll to a hash anchor on destination page\n          if(targetHash) {\n            var $targetHashEl = $(targetHash, $container);\n            if($targetHashEl.length){\n              var newPosition = $targetHashEl.offset().top;\n              document.body.scrollTop = newPosition;\n            }\n            targetHash = null;\n          }\n        },\n\n        /** Updates the contents from cache[url] */\n        updateContent = function (url) {\n          // If the content has been requested and is done:\n          var containerId = '#' + elementId,\n              $newContent = cache[url] ? $(cache[url].html.html()) : null;\n\n          if($newContent.length) {\n\n            // Update the title\n            document.title = cache[url].title;\n\n            // Update current url\n            $container.data('smoothState').href = url;\n\n            // Remove loading class\n            if(options.loadingClass) {\n              $body.removeClass(options.loadingClass);\n            }\n\n            // Call the onReady callback and set delay\n            options.onReady.render($container, $newContent);\n\n            $container.one('ss.onReadyEnd', function(){\n\n              // Allow prefetches to be made again\n              isTransitioning = false;\n\n              // Run callback\n              options.onAfter($container, $newContent);\n\n              repositionWindow();\n\n            });\n\n            window.setTimeout(function(){\n              $container.trigger('ss.onReadyEnd');\n            }, options.onReady.duration);\n\n          } else if (!$newContent && options.debug && consl) {\n            // Throw warning to help debug in debug mode\n            consl.warn('No element with an id of ' + containerId + ' in response from ' + url + ' in ' + cache);\n          } else {\n            // No content availble to update with, aborting...\n            window.location = url;\n          }\n        },\n\n        /**\n         * Loads the contents of a url into our container\n         * @param   {string}    url\n         * @param   {bool}      push - used to determine if we should\n         *                      add a new item into the history object\n         */\n        load = function (request, push) {\n\n          var settings = utility.translate(request);\n\n          /** Makes this an optional variable by setting a default */\n          if(typeof push === 'undefined') {\n            push = true;\n          }\n\n          var\n            /** Used to check if the onProgress function has been run */\n            hasRunCallback = false,\n\n            callbBackEnded = false,\n\n            /** List of responses for the states of the page request */\n            responses = {\n\n              /** Page is ready, update the content */\n              loaded: function () {\n                var eventName = hasRunCallback ? 'ss.onProgressEnd' : 'ss.onStartEnd';\n\n                if(!callbBackEnded || !hasRunCallback) {\n                  $container.one(eventName, function(){\n                    updateContent(settings.url);\n                  });\n                } else if(callbBackEnded) {\n                  updateContent(settings.url);\n                }\n\n                if(push) {\n                  window.history.pushState({ id: elementId }, cache[settings.url].title, settings.url);\n                }\n              },\n\n              /** Loading, wait 10 ms and check again */\n              fetching: function () {\n\n                if(!hasRunCallback) {\n\n                  hasRunCallback = true;\n\n                  // Run the onProgress callback and set trigger\n                  $container.one('ss.onStartEnd', function(){\n\n                    // Add loading class\n                    if(options.loadingClass) {\n                      $body.addClass(options.loadingClass);\n                    }\n\n                    options.onProgress.render($container);\n\n                    window.setTimeout(function (){\n                      $container.trigger('ss.onProgressEnd');\n                      callbBackEnded = true;\n                    }, options.onProgress.duration);\n\n                  });\n                }\n\n                window.setTimeout(function () {\n                  // Might of been canceled, better check!\n                  if(cache.hasOwnProperty(settings.url)){\n                    responses[cache[settings.url].status]();\n                  }\n                }, 10);\n              },\n\n              /** Error, abort and redirect */\n              error: function (){\n                if(options.debug && consl) {\n                  consl.log('There was an error loading: ' + settings.url);\n                } else {\n                  window.location = settings.url;\n                }\n              }\n            };\n\n          if (!cache.hasOwnProperty(settings.url)) {\n            fetch(settings);\n          }\n\n          // Run the onStart callback and set trigger\n          options.onStart.render($container);\n\n          window.setTimeout(function(){\n            $body.scrollTop(0);\n            $container.trigger('ss.onStartEnd');\n          }, options.onStart.duration);\n\n          // Start checking for the status of content\n          responses[cache[settings.url].status]();\n        },\n\n        /**\n         * Binds to the hover event of a link, used for prefetching content\n         * @param   {object}    event\n         */\n        hoverAnchor = function (event) {\n          var request,\n              $anchor = $(event.currentTarget);\n\n          if (utility.shouldLoadAnchor($anchor, options.blacklist) && !isTransitioning) {\n            event.stopPropagation();\n            request = utility.translate($anchor.prop('href'));\n            request = options.alterRequest(request);\n            fetch(request);\n          }\n        },\n\n        /**\n         * Binds to the click event of a link, used to show the content\n         * @param   {object}    event\n         */\n        clickAnchor = function (event) {\n          var $anchor = $(event.currentTarget);\n\n          // Ctrl (or Cmd) + click must open a new tab\n          if (!event.metaKey && !event.ctrlKey && utility.shouldLoadAnchor($anchor, options.blacklist)) {\n            var request = utility.translate($anchor.prop('href'));\n\n            // stopPropagation so that event doesn't fire on parent containers.\n            isTransitioning = true;\n            event.stopPropagation();\n            event.preventDefault();\n            targetHash = $anchor.prop('hash');\n\n            // Allows modifications to the request\n            request = options.alterRequest(request);\n\n            options.onBefore($anchor, $container);\n\n            load(request);\n          }\n        },\n\n        /**\n         * Binds to form submissions\n         * @param  {Event} event\n         */\n        submitForm = function (event) {\n          var $form = $(event.currentTarget);\n\n          if(!$form.is(options.blacklist)){\n            event.preventDefault();\n            event.stopPropagation();\n\n            var request = {\n                  url: $form.prop('action'),\n                  data: $form.serialize(),\n                  type: $form.prop('method')\n                };\n\n            isTransitioning = true;\n\n            request = options.alterRequest(request);\n\n            if(request.type.toLowerCase() === 'get') {\n              request.url = request.url + '?' + request.data;\n            }\n\n            // Call the onReady callback and set delay\n            options.onBefore($form, $container);\n\n            load(request);\n          }\n        },\n\n        /**\n         * Binds all events and inits functionality\n         * @param   {object}    event\n         */\n        bindEventHandlers = function ($element) {\n\n          $element.on('click', options.anchors, clickAnchor);\n\n          $element.on('submit', options.forms, submitForm);\n\n          if (options.prefetch) {\n            $element.on('mouseover touchstart', options.anchors, hoverAnchor);\n          }\n        },\n\n        /** Restart the container's css animations */\n        restartCSSAnimations = function () {\n          var classes = $container.prop('class');\n          $container.removeClass(classes);\n          utility.redraw($container);\n          $container.addClass(classes);\n        };\n\n      /** Merge defaults and global options into current configuration */\n      options = $.extend( {}, $.fn.smoothState.options, options );\n\n      /** Sets a default state */\n      if(window.history.state === null) {\n        window.history.replaceState({ id: elementId }, document.title, currentHref);\n      }\n\n      /** Stores the current page in cache variable */\n      utility.storePageIn(cache, currentHref, document.documentElement.outerHTML, elementId);\n\n      /** Bind all of the event handlers on the container, not anchors */\n      utility.triggerAllAnimationEndEvent($container, 'ss.onStartEnd ss.onProgressEnd ss.onEndEnd');\n\n      /** Bind all of the event handlers on the container, not anchors */\n      bindEventHandlers($container);\n\n      /** Public methods */\n      return {\n        href: currentHref,\n        cache: cache,\n        clear: clear,\n        load: load,\n        fetch: fetch,\n        restartCSSAnimations: restartCSSAnimations\n      };\n    },\n\n    /** Returns elements with smoothState attached to it */\n    declaresmoothState = function ( options ) {\n      return this.each(function () {\n        var tagname = this.tagName.toLowerCase();\n        // Checks to make sure the smoothState element has an id and isn't already bound\n        if(this.id && tagname !== 'body' && tagname !== 'html' && !$.data(this, 'smoothState')) {\n          // Makes public methods available via $('element').data('smoothState');\n          $.data(this, 'smoothState', new Smoothstate(this, options));\n        } else if (!this.id && consl) {\n          // Throw warning if in debug mode\n          consl.warn('Every smoothState container needs an id but the following one does not have one:', this);\n        } else if ((tagname === 'body' || tagname === 'html') && consl) {\n          // We dont support making th html or the body element the smoothstate container\n          consl.warn('The smoothstate container cannot be the ' + this.tagName + ' tag');\n        }\n      });\n    };\n\n  /** Sets the popstate function */\n  window.onpopstate = onPopState;\n\n  /** Makes utility functions public for unit tests */\n  $.smoothStateUtility = utility;\n\n  /** Defines the smoothState plugin */\n  $.fn.smoothState = declaresmoothState;\n\n  /* expose the default options */\n  $.fn.smoothState.options = defaults;\n\n})(jQuery, window, document);\n","/home/travis/build/npmtest/node-npmtest-smoothstate/node_modules/smoothstate/gulpfile.js":"'use strict';\n\nvar gulp = require('gulp'),\n    plugins = require('gulp-load-plugins')();\n\nvar scripts = [\n    './src/**/*.js',\n  ],\n  tests = [\n    './tests/**/*.js'\n  ],\n  allScripts = scripts.concat(tests);\n\n/** Run all unit tests */\ngulp.task('test', function() {\n  return gulp.src('./tests/index.html')\n        .pipe(plugins.qunit());\n});\n\n/** Lint JavaScript */\ngulp.task('jshint', function () {\n  return gulp.src(allScripts)\n    .pipe(plugins.jshint())\n    .pipe(plugins.jshint.reporter('jshint-stylish'))\n    .pipe(plugins.jshint.reporter('fail'));\n});\n\n/** Concatenate and minify JavaScript */\ngulp.task('uglify', function () {\n  return gulp.src(scripts)\n    .pipe(plugins.concat('jquery.smoothState.min.js'))\n    .pipe(plugins.uglify({preserveComments: 'some'}))\n    .pipe(gulp.dest('./'))\n    .pipe(plugins.size({title: 'scripts'}));\n});\n\n/** Watch changes */\ngulp.task('watch', function() {\n  gulp.watch(allScripts, ['jshint', 'test']);\n});\n\n/** Default task */\ngulp.task('default', ['jshint', 'test'], function() {\n  gulp.start('uglify');\n});\n"}